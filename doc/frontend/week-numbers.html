<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<link href="static/css/fullcalendar.min.css" rel="stylesheet" />
<script src="static/js/index.global.min.js"></script>
<script src="static/js/moment.min.js"></script>
<script src="static/js/jquery.min.js"></script>
<script>

  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');

    var calendar = new FullCalendar.Calendar(calendarEl, {
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
      },
      initialDate: '2023-01-12',
      navLinks: true, // can click day/week names to navigate views
      nowIndicator: true,

      weekNumbers: true,
      weekNumberCalculation: 'ISO',

      editable: true,
      selectable: true,
      dayMaxEvents: true, // allow "more" link when too many events
      events: [
        {
          title: 'All Day Event',
          start: '2023-01-01'
        },
        {
          title: 'Long Event',
          start: '2023-01-07',
          end: '2023-01-10'
        },
        {
          groupId: 999,
          title: 'Repeating Event',
          start: '2023-01-09T16:00:00'
        },
        {
          groupId: 999,
          title: 'Repeating Event',
          start: '2023-01-16T16:00:00'
        },
        {
          title: 'Conference',
          start: '2023-01-11',
          end: '2023-01-13'
        },
        {
          title: 'Meeting',
          start: '2023-01-12T10:30:00',
          end: '2023-01-12T12:30:00'
        },
        {
          title: 'Lunch',
          start: '2023-01-12T12:00:00'
        },
        {
          title: 'Meeting',
          start: '2023-01-12T14:30:00'
        },
        {
          title: 'Happy Hour',
          start: '2023-01-12T17:30:00'
        },
        {
          title: 'Dinner',
          start: '2023-01-12T20:00:00'
        },
        {
          title: 'Birthday Party',
          start: '2023-01-13T07:00:00'
        },
        {
          title: 'Click for Google',
          url: 'http://google.com/',
          start: '2023-01-28'
        }
      ]
    });

    calendar.render();
  });

</script>
<style>

  body {
    margin: 40px 10px;
    padding: 0;
    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
    font-size: 14px;
  }

  #calendar {
    max-width: 1100px;
    margin: 0 auto;
  }

</style>
</head>
<body>

  <div id='calendar'></div>
  <!-- 新增專案表 -->
  <div class="modal fade" id="eventFormModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="eventFormModal" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="eventFormMotalTitle"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form name="eventForm" id="eventForm" class="eventForm row g-3">
                  <div class="form-group">
                    <label for="dateInput" class="form-label">事件日期</label>
                    <input type="text" class="form-control" id="dateInput" aria-describedby="dateInput" readonly>
                  </div>
                  <div class="form-group">
                    <label for="eventInput" class="form-label">事件名稱</label>
                    <input type="text" class="form-control" id="eventInput" aria-describedby="eventInput" readonly>
                  </div>
                  <div class="form-group">
                    <label for="eventItemInput" class="form-label">事件類型</label>
                    <select class="form-select" id="eventItemInput" required="required">
                      <option>請選擇</option>
                      <option value="工作">工作</option>
                      <option value="個人">個人</option>
                      <option value="家庭">家庭</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="contentInput" class="form-label">事件內容</label>
                    <textarea class="form-control" name="contentInput" id="contentInput" cols="25" rows="4"></textarea>
                  </div>
                </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-bs-dismiss="modal">取消</button>
              <button type="button" class="btn btn-primary" id="eventFormOkButton">確定</button>
              <button type="button" class="btn btn-danger" id="eventFormDelButton">刪除</button>
            </div>
        </div>
    </div>
</div>
</body>
<script>

// eventFormOkButton：事件確認按鈕，綁定事件ID。
// eventFormDelButton：事件刪除按鈕，綁定事件ID。
// dateInput：事件日期，預設填入被點選的日期，不得修改。
// eventInput：事件名稱，若已有值，帶入欄位中顯示。
// eventItemInput：事件類型，下拉選單，選單內容為：工作、家庭、朋友、個人。
// contentInput：事件內容，若已有值，帶入欄位中顯示。
// eventFormModalTitle：定義編輯視窗的標題名稱。
// eventFormDelButton：事件刪除按鈕，針對已設定的事件，進行刪除。
// eventFormModal：顯示編輯視窗，供使用者編輯。

  $(document).ready(function(){
    $('#calendar').FullCalendar({
      dayClick: function(data, event, view) {
        //顯示編輯畫面事件
        $('#eventFormOkButton').data('key', data.id);
        $('#eventFormDelButton').data('key', data.id);
        $('#dateInput').val(data.fomat('YYYY-MM-DD'));
        $('#eventInput').val(data.spendEvent);
        $('#eventItemInput').val(data.eventItem).trigger('change');
        $('#contentInput').val(data.content);
        //修改modal標題名稱
        $('#eventFormMotalTitle').text('編輯事件');
        //顯示刪除按鈕
        $('#eventFormDelButton').show();
        $('#eventFormModal').modal('show');
      }
    });
  });

</script>
</html>
